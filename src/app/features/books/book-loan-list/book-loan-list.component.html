<!-- Ã–dÃ¼nÃ§ Ä°ÅŸlemleri Listesi SayfasÄ± -->
<div class="loan-list-container">
  
  <!-- Sayfa BaÅŸlÄ±ÄŸÄ± -->
  <div class="header">
    <h1>ğŸ“‹ Ã–dÃ¼nÃ§ Ä°ÅŸlemleri</h1>
    <div class="header-actions">
      <button (click)="goBack()" class="btn-secondary">
        â† Kitap Listesine DÃ¶n
      </button>
    </div>
  </div>

  <!-- YÃ¼kleniyor MesajÄ± -->
  <div *ngIf="isLoading" class="loading">
    <div class="spinner"></div>
    <p>Ã–dÃ¼nÃ§ iÅŸlemleri yÃ¼kleniyor...</p>
  </div>

  <!-- Hata MesajÄ± -->
  <div *ngIf="errorMessage" class="error-message">
    âŒ {{ errorMessage }}
    <button (click)="refreshList()" class="retry-btn">ğŸ”„ Tekrar Dene</button>
  </div>

  <!-- Ã–dÃ¼nÃ§ Listesi -->
  <div *ngIf="!isLoading && !errorMessage" class="loans-section">
    
    <!-- Toplam SayÄ± -->
    <div class="loans-count">
      <p>Toplam <strong>{{ bookLoans.length }}</strong> Ã¶dÃ¼nÃ§ iÅŸlemi bulundu</p>
    </div>

    <!-- HiÃ§ Ã–dÃ¼nÃ§ Yok -->
    <div *ngIf="bookLoans.length === 0" class="no-loans">
      <div class="no-loans-icon">ğŸ“­</div>
      <h3>HenÃ¼z Ã¶dÃ¼nÃ§ iÅŸlemi yapÄ±lmamÄ±ÅŸ</h3>
      <p>KullanÄ±cÄ±lar kitap Ã¶dÃ¼nÃ§ aldÄ±ÄŸÄ±nda burada gÃ¶rÃ¼necektir.</p>
    </div>

    <!-- Ã–dÃ¼nÃ§ Listesi Tablosu -->
    <div *ngIf="bookLoans.length > 0" class="loans-table-container">
      <table class="loans-table">
        
        <!-- Tablo BaÅŸlÄ±klarÄ± -->
        <thead>
          <tr>
            <th>SÄ±ra</th>
            <th>Kitap AdÄ±</th>
            <th>KullanÄ±cÄ±</th>
            <th>Ã–dÃ¼nÃ§ Tarihi</th>
            <th>Beklenen Teslim</th>
            <th>GerÃ§ek Teslim</th>
            <th>Durum</th>
          </tr>
        </thead>
        
        <!-- Tablo Ä°Ã§eriÄŸi -->
        <tbody>
          <tr *ngFor="let loan of bookLoans; let i = index" 
              [class.overdue-row]="isOverdue(loan.expectedReturnDate, loan.isReturned)"
              [class.returned-row]="loan.isReturned">
            
            <!-- SÄ±ra NumarasÄ± -->
            <td class="row-number">{{ i + 1 }}</td>
            
            <!-- Kitap AdÄ± -->
            <td class="book-title">
              <strong>{{ loan.bookTitle }}</strong>
            </td>
            
            <!-- KullanÄ±cÄ± AdÄ± -->
            <td class="user-name">
              {{ loan.userName }}
            </td>
            
            <!-- Ã–dÃ¼nÃ§ Tarihi -->
            <td class="loan-date">
              {{ formatDate(loan.loanDate) }}
            </td>
            
            <!-- Beklenen Teslim Tarihi -->
            <td class="return-date">
              {{ formatDate(loan.expectedReturnDate) }}
            </td>
            
            <!-- GerÃ§ek Teslim Tarihi -->
            <td class="actual-return-date">
              {{ loan.actualReturnDate ? formatDate(loan.actualReturnDate) : '-' }}
            </td>
            
            <!-- Durum -->
            <td class="status">
              <span *ngIf="loan.isReturned" class="status-badge returned">
              Teslim Edildi
              </span>
              <span *ngIf="!loan.isReturned && !isOverdue(loan.expectedReturnDate, loan.isReturned)" 
                    class="status-badge active">
              Ã–dÃ¼nÃ§ AlÄ±nmÄ±ÅŸ
              </span>
              <span *ngIf="!loan.isReturned && isOverdue(loan.expectedReturnDate, loan.isReturned)" 
                    class="status-badge overdue">
               GeÃ§ Teslim
              </span>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div> 