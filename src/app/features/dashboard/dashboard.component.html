<!-- Loading Screen -->
<div *ngIf="isLoading" class="loading-container">
  <div class="loading-spinner"></div>
  <p>Dashboard yÃ¼kleniyor...</p>
</div>

<!-- Main Dashboard -->
<div *ngIf="!isLoading" class="dashboard-container">

  <!-- Header -->
  <header class="dashboard-header">
    <div class="header-left">
      <h1>ğŸ“š KÃ¼tÃ¼phane YÃ¶netim Sistemi</h1>
      <p class="welcome-text">
        HoÅŸ geldiniz, <strong>{{ currentUser?.username || 'KullanÄ±cÄ±' }}</strong>!
      </p>
    </div>
    <div class="header-right">
      <span class="user-role">{{ currentUser?.role || 'KullanÄ±cÄ±' }}</span>
      <button (click)="refreshStats()" class="refresh-btn" title="Ä°statistikleri Yenile">
        ğŸ”„ Yenile
      </button>
      <button (click)="logout()" class="logout-btn">ğŸšª Ã‡Ä±kÄ±ÅŸ</button>
    </div>
  </header>

  <!-- Success Message -->
  <div class="success-alert">
    <div class="alert-icon">âœ…</div>
    <div class="alert-text">
      <strong>BaÅŸarÄ±lÄ±!</strong> Backend baÄŸlantÄ±sÄ± Ã§alÄ±ÅŸÄ±yor ve dashboard yÃ¼klendi.
    </div>
  </div>

  <!-- Stats Cards -->
  <section class="stats-section">
    <h2>ğŸ“Š Genel BakÄ±ÅŸ</h2>
    <div class="stats-grid">
      <div class="stat-card books-card">
        <div class="stat-icon">ğŸ“–</div>
        <div class="stat-info">
          <h3>{{ stats.totalBooks }}</h3>
          <p>Toplam Kitap</p>
        </div>
        <div class="stat-trend">ğŸ“ˆ</div>
      </div>

      <div class="stat-card authors-card">
        <div class="stat-icon">âœï¸</div>
        <div class="stat-info">
          <h3>{{ stats.totalAuthors }}</h3>
          <p>Toplam Yazar</p>
        </div>
        <div class="stat-trend">ğŸ“ˆ</div>
      </div>

      <div class="stat-card categories-card">
        <div class="stat-icon">ğŸ·ï¸</div>
        <div class="stat-info">
          <h3>{{ stats.totalCategories }}</h3>
          <p>Kategori</p>
        </div>
        <div class="stat-trend">ğŸ“ˆ</div>
      </div>

      <div class="stat-card borrowed-card">
        <div class="stat-icon">ğŸ“</div>
        <div class="stat-info">
          <h3>{{ stats.borrowedBooks }}</h3>
          <p>Ã–dÃ¼nÃ§ Kitap</p>
        </div>
        <div class="stat-trend">ğŸ“Š</div>
      </div>
    </div>
  </section>

  <!-- Navigation Cards -->
  <section class="navigation-section">
    <h2>ğŸ§­ HÄ±zlÄ± EriÅŸim</h2>
    <div class="nav-grid">
      <div class="nav-card books-nav" (click)="navigateTo('/books')">
        <div class="nav-icon">ğŸ“š</div>
        <h3>Kitap YÃ¶netimi</h3>
        <p>Kitap ekle, dÃ¼zenle, sil ve listele</p>
        <div class="nav-arrow">â†’</div>
      </div>

      <div class="nav-card authors-nav" (click)="navigateTo('/authors')">
        <div class="nav-icon">ğŸ‘¨â€ğŸ’¼</div>
        <h3>Yazar YÃ¶netimi</h3>
        <p>Yazar bilgilerini yÃ¶net</p>
        <div class="nav-arrow">â†’</div>
      </div>

      <div class="nav-card categories-nav" (click)="navigateTo('/categories')">
        <div class="nav-icon">ğŸ—‚ï¸</div>
        <h3>Kategori YÃ¶netimi</h3>
        <p>Kategori dÃ¼zenle ve ekle</p>
        <div class="nav-arrow">â†’</div>
      </div>

      <div class="nav-card reports-nav" (click)="navigateTo('/reports')">
        <div class="nav-icon">ğŸ“ˆ</div>
        <h3>Raporlar</h3>
        <p>Ä°statistikler ve detaylÄ± raporlar</p>
        <div class="nav-arrow">â†’</div>
      </div>
    </div>
  </section>

  <!-- Recent Books -->
  <section class="recent-section">
    <div class="section-header">
      <h2>ğŸ“– Son Eklenen Kitaplar</h2>
      <button class="view-all-btn" (click)="navigateTo('/books')">
        TÃ¼mÃ¼nÃ¼ GÃ¶r â†’
      </button>
    </div>

    <div class="recent-books">
      <div *ngFor="let book of recentBooks; let i = index"
           class="book-item"
           [class.featured]="i === 0">
        <div class="book-number">{{ i + 1 }}</div>
        <div class="book-info">
          <h4>{{ book.title }}</h4>
          <p class="book-author">
            <strong>Yazar:</strong> {{ book.author }}
          </p>
          <span class="book-category">{{ book.category }}</span>
        </div>
        <div class="book-actions">
          <button class="action-btn view" (click)="navigateTo('/books/' + (i+1))">
            ğŸ‘ï¸
          </button>
          <button class="action-btn edit" (click)="navigateTo('/books/edit/' + (i+1))">
            âœï¸
          </button>
        </div>
      </div>
    </div>
  </section>

  <!-- Quick Actions -->
  <section class="quick-actions">
    <h2>âš¡ HÄ±zlÄ± Ä°ÅŸlemler</h2>
    <div class="action-buttons">
      <button class="action-btn-large add-book" (click)="navigateTo('/books/add')">
        <span class="btn-icon">ğŸ“š</span>
        <span class="btn-text">Yeni Kitap Ekle</span>
      </button>

      <button class="action-btn-large add-author" (click)="navigateTo('/authors/add')">
        <span class="btn-icon">ğŸ‘¨â€ğŸ’¼</span>
        <span class="btn-text">Yeni Yazar Ekle</span>
      </button>

      <button class="action-btn-large backup" (click)="navigateTo('/backup')">
        <span class="btn-icon">ğŸ’¾</span>
        <span class="btn-text">Yedekleme</span>
      </button>
    </div>
  </section>

</div>
